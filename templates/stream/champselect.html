<!DOCTYPE html>
<html>
<head>
	<meta charset = "utf-8"/>
	<link rel="stylesheet" href={{ url_for('static', filename='index.css')}}>
	<link rel="shortcut icon" href={{ url_for('static', filename='favicon.ico')}}>
	<title>Thinked</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:500&display=swap" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.2/socket.io.js" crossorigin="anonymous"></script>
<style>
</style>
</head>
<body>
	<div class="main-app">

		<div id="SKRIVING" style="position: absolute;"></div>
		<div class="team" id="myTeam">
			<div class="player" id="0">
				<div class="champion">
					<img src="/static/nonePick.png" id="championImage" ></img>
					<div class="summonerSpells" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpell"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpell"></img>
					</div>
				</div>
				<div class="SummonerName">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="1">
				<div class="champion">
					<img src="/static/nonePick.png" id="championImage" ></img>
					<div class="summonerSpells" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpell"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpell"></img>
					</div>
				</div>
				<div class="SummonerName">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="2">
				<div class="champion">
					<img src="/static/nonePick.png" id="championImage" ></img>
					<div class="summonerSpells" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpell"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpell"></img>
					</div>
				</div>
				<div class="SummonerName">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>

				</div>
			</div>
			<div class="player" id="3" style="margin-top: 43px;">
				<div class="champion">
					<img src="/static/nonePick.png" id="championImage" ></img>
					<div class="summonerSpells" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpell"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpell"></img>
					</div>
				</div>
				<div class="SummonerName">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="4">
				<div class="champion">
					<img src="/static/nonePick.png" id="championImage" ></img>
					<div class="summonerSpells" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpell"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpell"></img>
					</div>
				</div>
				<div class="SummonerName">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
		</div>
		<div class="team" id="theirTeam">
			<div class="player" id="5">
				<div class="champion">
					<img src="/static/nonePick2.png" id="championImage" ></img>
					<div class="summonerSpellsR" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpellR"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpellR"></img>
					</div>
				</div>
				<div class="SummonerName" id="sumNameR">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="6">
				<div class="champion">
					<img src="/static/nonePick2.png" id="championImage" ></img>
					<div class="summonerSpellsR" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpellR"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpellR"></img>
					</div>
				</div>
				<div class="SummonerName"id="sumNameR">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="7">
				<div class="champion">
					<img src="/static/nonePick2.png" id="championImage" ></img>
					<div class="summonerSpellsR" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpellR"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpellR"></img>
					</div>
				</div>
				<div class="SummonerName"id="sumNameR">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="8"style="margin-top: 43px;">
				<div class="champion">
					<img src="/static/nonePick2.png" id="championImage" ></img>
					<div class="summonerSpellsR" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpellR"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpellR"></img>
					</div>
				</div>
				<div class="SummonerName"id="sumNameR">
					<h2 ></h2>
				</div>
				<div class="noneHover"id="hover">
					<h2>Picking</h2>
				</div>
			</div>
			<div class="player" id="9">
				<div class="champion">
					<img src="/static/nonePick2.png" id="championImage" ></img>
					<div class="summonerSpellsR" style="visibility: hidden;">
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerFlash.png" id="summonerSpell1" class="summonerSpellR"></img>
						<img src="https://ddragon.leagueoflegends.com/cdn/9.3.1/img/spell/SummonerDot.png" id="summonerSpell2" class="summonerSpellR"></img>
					</div>
				</div>
				<div class="SummonerName"id="sumNameR">
					<h2 ></h2>
				</div>
				<div class="noneHover" id="hover">
					<h2>Picking</h2>
				</div>
			</div>

		</div>
		<div class="banClass" id="banClass">
			<div class="teamBans" id="blueTeamBans">
				<div class="ban" id="ban1"><img src={{ url_for('static', filename='tall/1.png')}} id="banImage"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban2"><img src={{ url_for('static', filename='tall/2.png')}} id="banImage"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban3"><img src={{ url_for('static', filename='tall/3.png')}} id="banImage"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban4"style="padding-left:46px;"><img src={{ url_for('static', filename='tall/4.png')}} id="banImage"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban5"><img src={{ url_for('static', filename='tall/5.png')}} id="banImage"><div class="Bantext"></div></img></div>
			</div>
			<div class="teamBans" id="redTeamBans">
				<div class="ban" id="ban5"><img src={{ url_for('static', filename='tall/R5.png')}} id="banImageR"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban4" style="padding-right:46px;"><img src={{ url_for('static', filename='tall/R4.png')}} id="banImageR"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban3"><img src={{ url_for('static', filename='tall/R3.png')}} id="banImageR"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban2"><img src={{ url_for('static', filename='tall/R2.png')}} id="banImageR"><div class="Bantext"></div></img></div>
				<div class="ban" id="ban1"><img src={{ url_for('static', filename='tall/R1.png')}} id="banImageR"><div class="Bantext"></div></img></div>
			</div>
		</div>
		<div class="timer">
			<div id="timerBlue">
				<h2 class="timerText">0</h2>
				<img src="static/timer/Blue.png"></img>

			</div>
			<div id="timerRed">
				<h2 class="timerText">0</h2>
				<img src="static/timer/Red.png"></img>

			</div>
		</div>

		<div id="phase" class="phase">
			<h1>BANNING</h1>
		</div>
	</div>

	<div class="Overlays" id="onKey">
		<!--<img src={{ url_for('static', filename='TelenorLigaen_pos.png')}} class="Overlays" id="LeagueTag" style="visibility:hidden;"></img>-->
	</div>
	<div class="Background-image-container">
		<!--<img src={{ url_for('static', filename='Transparent.png')}} class="Background-image" id="botCS"style="visibility:hidden;"></img>-->

	</div>
							<!--	<div class="borderImage" style="background-image: url(//opgg-static.akamaized.net/images/borders2/diamond.png);"></div>
							<img src="http://opgg-static.akamaized.net/images/profile_icons/profileIcon3041.jpg" class="ProfileImage"> -->







</div>
<script>
    let settings = {{settings|safe}};
    let getNames = false;
    var socket = io();
    let delaytid = 180000;
    if(settings != undefined){
        //console.log(settings);
        delaytid= settings.lol.championSelectDelay * 1000;
        console.log(delaytid);
        console.log("DELAY TID FRA INSTILLINGER");
    }
    //console.log(delaytid);
    //var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
         socket.emit('my event', {data: 'I\'m connected!'});
         socket.emit('message',{data:"MESSAGE"});
         console.log("CONNTEXTEDS");
     });
    socket.on("updateChampionSelecBrowser", function(data) {
        console.log(data);
        processJsonData(data);
        console.log("INFO");
        if(getNames){
            getNamesFromJsonData(data);
        }
    });
    socket.on("updatePlayerNamesInBrowser", function(data){
        console.log("UPDATE PLAYERNAMES");
        //getNamesFromJsonData(data);
        if(data.updatedNames){
            getNames = true;
        }
        console.log(data);
    });
    socket.on("clearChampionSelect", function(){
        timerRedText.innerHTML = "";
        timerBlueText.innerHTML = "";

        console.log(timerBlueText.innerHTML);
        for(let i =0; i<5;i++){
            //Bilder
            championBilder[i].src = "static/nonePick.png";
            summonerBilder1[i].style = "visibility:hidden;";
            summonerBilder2[i].style = "visibility:hidden;";
            summonerSpellsDiv[i].style = "visibility:hidden;";
            //Red
            championBilder[i+5].src = "static/nonePick2.png";
            summonerBilder1[i+5].style = "visibility:hidden;";
            summonerBilder2[i+5].style = "visibility:hidden;";
            summonerSpellsDiv[i+5].style = "visibility:hidden;";

            hoverDiv[i].className = "noneHover";
            hoverDiv[i+5].className = "noneHover";

            summonerNamesAll[i].innerHTML = "";
            summonerNamesAll[i+5].innerHTML = "";

            blueBans[i].src = "static/tall/" + (i + 1) + ".png";
            redBans[4 - i].src = "static/tall/R" + (i + 1) + ".png";
        }
        console.log("CLEAR CHAMPIONSELECT");
    });
    //  socket.on('message', function(data){
    //       console.log("message");
    //       console.log(data);
    //  });
    // socket.on('livecontrolupdate', function(data){
    //      console.log("message");
    //      console.log(data);
    // });
    var timerBox = document.querySelector(".timer");
    var timerBlueDiv = document.querySelector("#timerBlue");
    var timerRedDiv = document.querySelector("#timerRed");
    var timerBlueText = document.querySelector("#timerBlue > h2");
    var timerRedText = document.querySelector("#timerRed > h2");



    var hoverDiv = document.querySelectorAll("div.player > div#hover");
    //ChampionPick
    var championBilder = document.querySelectorAll("div.player > div.champion > img");
    //SummonerNames
    var summonerNamesAll = document.querySelectorAll("div.player > div.SummonerName > h2");

    //Summoners
    var summonerSpellsDiv = document.querySelectorAll("div.player > div.champion > div.summonerSpellsR, div.player > div.champion > div.summonerSpells");
    var summonerBilder1 = document.querySelectorAll("div.player > div.champion > div.summonerSpellsR >img#summonerSpell1, div.player > div.champion > div.summonerSpells >img#summonerSpell1");
    var summonerBilder2 = document.querySelectorAll("div.player > div.champion > div.summonerSpellsR >img#summonerSpell2, div.player > div.champion > div.summonerSpells >img#summonerSpell2");
    //Bans
    var blueBans = document.querySelectorAll("div#blueTeamBans > div.ban > img");
    var redBans = document.querySelectorAll("div#redTeamBans > div.ban > img");
    //BAN-Text
    var blueBansText = document.querySelectorAll("div#blueTeamBans > div.ban > div.Bantext >h1");
    var blueBanDiv = document.querySelectorAll("div#blueTeamBans > div.ban > div.Bantext");
    var redBansText = document.querySelectorAll("div#redTeamBans > div.ban > div.Bantext >h1");
    var redBanDiv = document.querySelectorAll("div#redTeamBans > div.ban > div.Bantext");

    var phaseDiv = document.getElementById("phase");

    
    //delaytid = 10000;
    //delaytid = 210000; //3min 30sek
    //delaytid = 180000; //3min
    //delaytid = 5000;
    //console.log("INFO");

    function getInfo() {
        //console.log("HenterInfo");
        var xhr = new XMLHttpRequest();
        console.log(window.location.href);
        xhr.open('GET', window.location.href + "/json", true);
        xhr.send();
        //xhr.onreadystatechange = processRequest;
        xhr.onreadystatechange = setTimeout(() => {  processRequest(1); }, delaytid);
        //setTimeout(() => {  processRequest(1); }, delaytid);
        function processRequest(e) {
                console.log(xhr.readyState + " : " + xhr.status);
                console.log(xhr.responseText);
            //var response = JSON.parse(xhr.responseText);
                //console.log(response);
            if (xhr.readyState == 4 && xhr.status == 200 ) {

                var response = JSON.parse(xhr.responseText);
                console.log(response);
                for (var i = 0; i < 5; i++) {
                    //PER PLAYER
                    //BLUESIDE Check
                    if (response.team.myTeam[i] != undefined) {
                        console.log("NOT UNDEFINED BLUESIDE");
                        //ChampionPick
                        if (response.team.myTeam[i].Pick != "None") {

                            championBilder[i].src = "static/pick/"+response.team.myTeam[i].Pick + ".png";

                        }
                        
                        //Hovering
                        if (response.team.myTeam[i].Hover == false) {
                            hoverDiv[i].innerHTML = "<h2 style ='text-shadow: black -1px 0px, black 0px 1px, black 1px 0px, black 0px -1px;'>" + response.action.pickType + "</h2>";
                            //hoverDiv[i].innerHTML = "<h2 style ='text-shadow: black -2px 0px, black 2px 1px, black 1px 1px, black 0px -2px, black 0px 0px, black -2px 0px, black 0px -2px, black -1px -2px, black -2px -2px, black 2px 1px, black 2px 2px, black 1px 2px, black 0px 2px, black -1px 2px, black -2px 2px'>" + response.action.pickType + "</h2>";
                            hoverDiv[i].className = "Hovering";

                        } else if (response.team.myTeam[i].Hover == "Picking Next") {
                            hoverDiv[i].innerHTML = "<h3>Picking Next</h3>";
                            hoverDiv[i].className = "Hovering";

                        } else {
                            hoverDiv[i].className = "noneHover";
                        }
                        //Summoners
                        if (response.team.myTeam[i].SummonerSpell1 == undefined || response.team.myTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i].style = "visibility:hidden;";
                            summonerBilder2[i].style = "visibility:hidden;";
                            summonerSpellsDiv[i].style = "visibility:hidden;";
                        } else if (response.team.myTeam[i].Pick != "None") {
                            //console.log("RESPONSE != ALT");

                            summonerBilder1[i].src = "static/spell/" + response.team.myTeam[i].SummonerSpell1 + ".png";
                            summonerBilder1[i].style = "";
                            summonerBilder2[i].src = "static/spell/" + response.team.myTeam[i].SummonerSpell2 + ".png";
                            summonerBilder2[i].style = "visibility:none;";
                            summonerSpellsDiv[i].style = "";
                        } else if (response.team.myTeam[i].Pick == "None") {
                            summonerBilder1[i].style = "visibility:hidden;";
                            summonerBilder2[i].style = "visibility:hidden;";
                            summonerSpellsDiv[i].style = "visibility:hidden;";
                        }
                    } else {

                        championBilder[i].src = "static/nonePick.png";
                        summonerBilder1[i].style = "visibility:hidden;";
                        summonerBilder2[i].style = "visibility:hidden;";
                        summonerSpellsDiv[i].style = "visibility:hidden;";
                    }
                    //BLUESIDE Check END
                    //REDSIDE Check
                    if (response.team.theirTeam[i] != undefined) {
                    console.log("NOT UNDEFINED REDSIDE");
                        //ChampionPick
                        if (response.team.theirTeam[i].Pick != "None") {
                            championBilder[i + 5].src = "static/pick/" + response.team.theirTeam[i].Pick + ".png";
                            championBilder[i + 5].style = "-webkit-transform: scaleX(-1);";


                        }
                        //Hovering
                        if (response.team.theirTeam[i].Hover == false) {
                            //console.log("Picking");
                            
                            hoverDiv[i + 5].innerHTML = "<h2 style ='text-shadow: black -1px 0px, black 0px 1px, black 1px 0px, black 0px -1px;'>" + response.action.pickType + "</h2>";
                            //hoverDiv[i + 5].innerHTML = "<h2 style ='text-shadow: black -2px 0px, black 2px 1px, black 1px 1px, black 0px -2px, black 0px 0px, black -2px 0px, black 0px -2px, black -1px -2px, black -2px -2px, black 2px 1px, black 2px 2px, black 1px 2px, black 0px 2px, black -1px 2px, black -2px 2px'>" + response.action.pickType + "</h2>";
                            hoverDiv[i + 5].className = "HoveringRight";
                        } else if (response.team.theirTeam[i].Hover == "Picking Next") {
                            //console.log("Picking Next");
                            hoverDiv[i + 5].innerHTML = "<h3>" + response.team.theirTeam[i].Hover + "</h3>";
                            hoverDiv[i + 5].className = "HoveringRight";
                        } else {
                            //console.log("NONEHOVER");
                            hoverDiv[i + 5].className = "noneHover";
                        }
                        //Summoners
                        if (response.team.theirTeam[i].SummonerSpell1 == undefined || response.team.theirTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        } else if (response.team.theirTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        } else if (response.team.theirTeam[i].Pick != "None") {
                            //console.log("not None R");
                            summonerBilder1[i + 5].src = "static/spell/" + response.team.theirTeam[i].SummonerSpell1 + ".png";
                            summonerBilder1[i + 5].style = "";
                            summonerBilder2[i + 5].src = "static/spell/" + response.team.theirTeam[i].SummonerSpell2 + ".png";
                            summonerBilder2[i + 5].style = "visibility:none;";
                            summonerSpellsDiv[i+5].style = "";
                        } else if (response.team.theirTeam[i].Pick == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        }
                    } else {

                        championBilder[i + 5].src = "static/nonePick2.png";
                        championBilder[i + 5].style = "";
                        summonerBilder1[i + 5].style = "visibility:hidden;";
                        summonerBilder2[i + 5].style = "visibility:hidden;";
                        summonerSpellsDiv[i+5].style = "visibility:hidden;";

                    }
                    //REDSIDE Check END

                    //BANS
                    if (response.bans.myTeamBans[i] != "None") {
                        blueBans[i].src = "static/ban/" + response.bans.myTeamBans[i] + ".png";

                    } else if (response.bans.myTeamBans[i] == "None") {

                        blueBans[i].src = "static/tall/" + (i + 1) + ".png";
                    }
                    if (response.bans.theirTeamBans[i] != "None") {
                        //console.log("BAN THEIR TEAM, i: " + (4-i));
                        redBans[4 - i].src = "static/ban/" + response.bans.theirTeamBans[i] + ".png";
                    } else if (response.bans.theirTeamBans[i] == "None") {

                        redBans[4 - i].src = "static/tall/R" + (i + 1) + ".png";
                    }
                    //BANS END



                }
                if (response.action.pickType != undefined) {
                    phaseDiv.innerHTML = "<h1 >" + (response.action.pickType).toUpperCase() + "</h1>";
                }

                //TIMER
                if (response.action.position > 4) {
                    if(response.action.id == 20 || response.action.completed){//Both red and blueside timer shown
                    timerRedDiv.style = "visibility: visible;";
                    timerBlueDiv.style = "visibility:visible;";
                    }else{
                    timerRedDiv.style = "visibility: visible;";
                    timerBlueDiv.style = "visibility:hidden;";
                    }
                    //phaseDiv.className = "phaseRed";
                    //timerBox.id = "timerRed";
                } else {
                    //phaseDiv.className = "phase";
                    //timerBox.id = "timerBlue";
                    timerRedDiv.style = "visibility: hidden;";
                    timerBlueDiv.style = "visibility:visible;";
                }



            }
        }
    }
    function getTimer() {
        //console.log("HenterTimer");
        var xhr = new XMLHttpRequest();
        xhr.open('GET', window.location.href + "/timer", true);
        xhr.send();
        //xhr.onreadystatechange = processRequest;
        //xhr.onreadystatechange = setTimeout(() => {  processRequest; }, delaytid);
        xhr.onreadystatechange = setTimeout(() => {  processRequest(1); }, delaytid);
        //setTimeout(() => {  processRequest(1); }, delaytid);
        function processRequest(e) {
            //console.log(xhr.readyState)
            if (xhr.readyState == 4 && xhr.status == 200) {
                // time to partay!!!
                var response = JSON.parse(xhr.responseText);
                //console.log("response.timer = "+response.time);
                //timerBox.innerHTML = "<h1 style='margin-top: -3px; margin-left: -40px;'>:" + response.time + "</h1>";
                //console.log(timerBox.innerHTML);
                timerRedText.innerHTML = response.time;
                timerBlueText.innerHTML = response.time;
            }
        }
    }

    function processJsonData(data){
        //var response = JSON.parse(data);
        var response = data;
                console.log(response);
                for (var i = 0; i < 5; i++) {//PER PLAYER                   
                    if (response.team.myTeam[i] != undefined) {//BLUESIDE Check
                        console.log("NOT UNDEFINED BLUESIDE");                       
                        if (response.team.myTeam[i].Pick != "None") {//ChampionPick
                            championBilder[i].src = "static/pick/"+response.team.myTeam[i].Pick + ".png";
                        }                                                
                        if (response.team.myTeam[i].Hover == false) {//Hovering
                            hoverDiv[i].innerHTML = "<h2 style ='text-shadow: black -1px 0px, black 0px 1px, black 1px 0px, black 0px -1px;'>" + response.action.pickType + "</h2>";
                            hoverDiv[i].className = "Hovering";
                        } else if (response.team.myTeam[i].Hover == "Picking Next") {
                            hoverDiv[i].innerHTML = "<h3>Picking Next</h3>";
                            hoverDiv[i].className = "Hovering";
                        } else {
                            hoverDiv[i].className = "noneHover";
                        }
                        //Summoners
                        if (response.team.myTeam[i].SummonerSpell1 == undefined || response.team.myTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i].style = "visibility:hidden;";
                            summonerBilder2[i].style = "visibility:hidden;";
                            summonerSpellsDiv[i].style = "visibility:hidden;";
                        } else if (response.team.myTeam[i].Pick != "None") {
                            summonerBilder1[i].src = "static/spell/" + response.team.myTeam[i].SummonerSpell1 + ".png";
                            summonerBilder1[i].style = "";
                            summonerBilder2[i].src = "static/spell/" + response.team.myTeam[i].SummonerSpell2 + ".png";
                            summonerBilder2[i].style = "visibility:none;";
                            summonerSpellsDiv[i].style = "";
                        } else if (response.team.myTeam[i].Pick == "None") {
                            summonerBilder1[i].style = "visibility:hidden;";
                            summonerBilder2[i].style = "visibility:hidden;";
                            summonerSpellsDiv[i].style = "visibility:hidden;";
                        }
                    } else {
                        championBilder[i].src = "static/nonePick.png";
                        summonerBilder1[i].style = "visibility:hidden;";
                        summonerBilder2[i].style = "visibility:hidden;";
                        summonerSpellsDiv[i].style = "visibility:hidden;";
                    }//BLUESIDE Check END                   
                    if (response.team.theirTeam[i] != undefined) {//REDSIDE Check
                    console.log("NOT UNDEFINED REDSIDE");             
                        if (response.team.theirTeam[i].Pick != "None") {//ChampionPick
                            championBilder[i + 5].src = "static/pick/" + response.team.theirTeam[i].Pick + ".png";
                            championBilder[i + 5].style = "-webkit-transform: scaleX(-1);";
                        }                        
                        if (response.team.theirTeam[i].Hover == false) {//Hovering
                            hoverDiv[i + 5].innerHTML = "<h2 style ='text-shadow: black -1px 0px, black 0px 1px, black 1px 0px, black 0px -1px;'>" + response.action.pickType + "</h2>";
                            hoverDiv[i + 5].className = "HoveringRight";
                        } else if (response.team.theirTeam[i].Hover == "Picking Next") {
                            hoverDiv[i + 5].innerHTML = "<h3>" + response.team.theirTeam[i].Hover + "</h3>";
                            hoverDiv[i + 5].className = "HoveringRight";
                        } else {
                            hoverDiv[i + 5].className = "noneHover";
                        }
                        //Summoners
                        if (response.team.theirTeam[i].SummonerSpell1 == undefined || response.team.theirTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        } else if (response.team.theirTeam[i].SummonerSpell1 == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        } else if (response.team.theirTeam[i].Pick != "None") {
                            summonerBilder1[i + 5].src = "static/spell/" + response.team.theirTeam[i].SummonerSpell1 + ".png";
                            summonerBilder1[i + 5].style = "";
                            summonerBilder2[i + 5].src = "static/spell/" + response.team.theirTeam[i].SummonerSpell2 + ".png";
                            summonerBilder2[i + 5].style = "visibility:none;";
                            summonerSpellsDiv[i+5].style = "";
                        } else if (response.team.theirTeam[i].Pick == "None") {
                            summonerBilder1[i + 5].style = "visibility:hidden;";
                            summonerBilder2[i + 5].style = "visibility:hidden;";
                            summonerSpellsDiv[i+5].style = "visibility:hidden;";
                        }
                    } else {
                        championBilder[i + 5].src = "static/nonePick2.png";
                        championBilder[i + 5].style = "";
                        summonerBilder1[i + 5].style = "visibility:hidden;";
                        summonerBilder2[i + 5].style = "visibility:hidden;";
                        summonerSpellsDiv[i+5].style = "visibility:hidden;";
                    }
                    //REDSIDE Check END
                    //BANS
                    if (response.bans.myTeamBans[i] != "None") {
                        blueBans[i].src = "static/ban/" + response.bans.myTeamBans[i] + ".png";
                    } else if (response.bans.myTeamBans[i] == "None") {
                        blueBans[i].src = "static/tall/" + (i + 1) + ".png";
                    }
                    if (response.bans.theirTeamBans[i] != "None") {
                        redBans[4 - i].src = "static/ban/" + response.bans.theirTeamBans[i] + ".png";
                    } else if (response.bans.theirTeamBans[i] == "None") {
                        redBans[4 - i].src = "static/tall/R" + (i + 1) + ".png";
                    }
                }//BANS END
                if (response.action.pickType != undefined) {
                    phaseDiv.innerHTML = "<h1 >" + (response.action.pickType).toUpperCase() + "</h1>";
                }
                //TIMER
                if (response.action.position > 4) {
                    if(response.action.id == 20 || response.action.completed){//Both red and blueside timer shown
                    timerRedDiv.style = "visibility: visible;";
                    timerBlueDiv.style = "visibility:visible;";
                    }else{
                    timerRedDiv.style = "visibility: visible;";
                    timerBlueDiv.style = "visibility:hidden;";
                    }
                } else {
                    timerRedDiv.style = "visibility: hidden;";
                    timerBlueDiv.style = "visibility:visible;";
                }

    }
    function getNamesFromJsonData(data){
                var response = data;
                for (var i = 0; i < 5; i++) {               
                    if (response.team.myTeam[i] == undefined) {//BLUESIDE
                        summonerNamesAll[i].innerHTML = "";
                        summonerNamesAll[i].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                    } else {
                        summonerNamesAll[i].innerHTML = response.team.myTeam[i].Name + " ";
                        summonerNamesAll[i].style = "text-shadow: 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000,0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000";
                    }                    
                    if (response.team.theirTeam[i] == undefined) {//REDSIDE
                        summonerNamesAll[i + 5].innerHTML = "";
                        summonerNamesAll[i + 5].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                    } else {
                        summonerNamesAll[i + 5].innerHTML = response.team.theirTeam[i].Name;
                        summonerNamesAll[i+5].style = "text-shadow: 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000,0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000";
                    }
                    
                }//BANS CSS
    }
    
    
    
    function setNames() {
        //console.log("GettingNamesJson");
        var xhr = new XMLHttpRequest();
        xhr.open('GET', window.location.href+"/json", true);
        xhr.send();
        //xhr.onreadystatechange = processRequest;
        //setTimeout(() => {  processRequest(1); }, delaytid);
        xhr.onreadystatechange = setTimeout(() => {  processRequest(1); }, delaytid);
        function processRequest(e) {
            //	console.log(xhr.readyState)
            if (xhr.readyState == 4 && xhr.status == 200) {
                // time to partay!!!
                var response = JSON.parse(xhr.responseText);
                for (var i = 0; i < 5; i++) {
                    //BLUESIDE
                    if (response.team.myTeam[i] == undefined) {
                        summonerNamesAll[i].innerHTML = "";
                        summonerNamesAll[i].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                        //summonerNamesAll[i].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                    } else {
                        summonerNamesAll[i].innerHTML = response.team.myTeam[i].Name + " ";
                        //summonerNamesAll[i].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                        //Gammel//summonerNamesAll[i].style = "text-shadow: black -2px 0px, black 2px 1px, black 1px 1px, black 0px -2px, black 0px 0px, black -2px 0px, black 0px -2px, black -1px -2px, black -2px -2px, black 2px 1px, black 2px 2px, black 1px 2px, black 0px 2px, black -1px 2px, black -2px 2px;";
                        summonerNamesAll[i].style = "text-shadow: 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000,0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000";
                        //summonerNamesAll[4-i].style = "font-size:0.1vw";
                        //summonerNamesAll[4-i].style = "font-size:" + (50-(response.team.myTeam[i].Name).length)*0.030 + "vw; margin-top: 0px;";
                        //summonerNamesAll[i].style = "position: absolute; right: 33px; top: 38px;";
                    }
                    //REDSIDE
                    if (response.team.theirTeam[i] == undefined) {
                        summonerNamesAll[i + 5].innerHTML = "";
                        summonerNamesAll[i + 5].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                    } else {
                        summonerNamesAll[i + 5].innerHTML = response.team.theirTeam[i].Name;
                        //summonerNamesAll[i + 5].style = "text-shadow: black -2px 0px, black 2px 1px, black 1px 1px, black 0px -2px, black 0px 0px, black -2px 0px, black 0px -2px, black -1px -2px, black -2px -2px, black 2px 1px, black 2px 2px, black 1px 2px, black 0px 2px, black -1px 2px, black -2px 2px;";
                        //summonerNamesAll[i + 5].style = "text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;";
                        summonerNamesAll[i+5].style = "text-shadow: 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000,0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 4px #000000, 0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000,0px 0px 2px #000000, 0px 0px 2px #000000";
                        
                        //summonerNamesAll[i+5].style = "font-size:" + (25-(response.team.theirTeam[i].Name).length)*0.09 + "vw; margin-top: 0px;";
                        //summonerNamesAll[i+5].style = "postition: absolute; left: 10px; top: 38px; position: absolute;";

                    }
                    //BANS CSS
                    //blueBansText[i].innerHTML = "Ban "+(i+1);
                    //blueBanDiv[i].style = " position: relative; top:-134px;    background-color: #0000008c; border-radius: 16px;";
                    //redBansText[i].innerHTML = "Ban "+(5-i);
                    //redBanDiv[i].style = " position: relative; top:-134px;    background-color: #0000008c; border-radius: 16px;";


                }
            }
        }


    }
    document.onkeydown = checkKey;
    function checkKey(e) {

        e = e || window.event;

        if (e.keyCode == '190') {
            setNames();
            // up arrow
        }

    }
    function timer(ms) {
        return new Promise(res => setTimeout(res, ms));
    }
    //setInterval(getInfo(), 500);
    //getInfo();
    var teller = 0;
    async function load() {
        await timer(1500);
        while (true) {
            if (teller == 4) {
                //console.log("GET Timer");
                await getTimer();
                //console.log("GET INFO");
                //await getInfo();
                //console.log("GET Names");
                //await setNames();
                teller = 0;
            } else {
                await getTimer();
                teller++;
            }
            await timer(250);
        }
    }
    // setNames();
    // getTimer();
    // getInfo();


    load();




</script>

</body>
</html>
