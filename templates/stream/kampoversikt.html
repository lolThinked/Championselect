<link rel="stylesheet" href={{ url_for('static', filename='css/stream/kampoversikt.css')}}>
<!-- <img src="static/Overlayed.png" alt="overlayed" class="OverlayImage"> -->
<div class="kamper" onload="startAnimasjoner" id="kampContainerID">
    
    

    <!--AUTOKAMP INFYLLING-->
    {% for kamp in kamper %}
    
    <div class="kamp" style="display: none;">
        <div class="kamp-top-container">
            <!--LAG 1-->
            <div class="lag lag1">
                <!--BILDE-->
                <div class="lag-image-container">
                    <img src="static/laglogoer/{{kamp.lag1.bilde}}" alt="logo">
                </div>
                <!--NAVN-->
                <div class="lag-navn-container">
                    <h1 id="id_lag1_navn">{{kamp.lag1.navn}}</h1>
                </div> 
            </div>

            <div class="spacer">
                <h1>VS</h1>
                <h1 id="id_kl">{{kamp.tid}}</h1>
            </div>

            <!--LAG 2-->
            <div class="lag lag2">
                <!--NAVN-->
                <div class="lag-navn-container">
                    <h1 id="id_lag1_navn">{{kamp.lag2.navn}}</h1>
                </div>
                <!--BILDE-->
                <div class="lag-image-container">
                    <img src="static/laglogoer/{{kamp.lag2.bilde}}" alt="logo">
                </div>
            </div>
        </div>
        <div class="kamp-bot-container">
            <div class="kamp-bot-divisjon">
                <h2>{{kamp.divisjon}}</h2>
            </div>
            <div class="kamp-bot-liga">
                <h2 class="kamp-liga">{{kamp.liga}}</h2>
            </div>
            <div class="kamp-bot-spill">
                <h2 class="kamp-spill">{{kamp.spill}}</h2>
            </div>
        </div>
        <div class="EDITClass" >
            <div>
                <h2 id="kampID">{{kamp.kampID}}</h2>
            </div>
            <div>
                <button onclick="slettKamp('{{kamp.kampID}}')">SLETT</button>
                <button onclick="rediger('{{kamp.kampID}}')">REDIGER</button>
                <button onclick="byttSide('{{kamp.kampID}}')">BYTT SIDE</button>
                
            </div>
            <div>
                <h2>{{kamp.dato}}</h2>
            </div>
            <div>
                <a href="{{ url_for('twitterMatchImage', id=kamp.kampID) }}">twitterMatchImage</a>
            </div>
        </div>         
    </div>
    
    
    {% endfor %}
    
</div>
<script>
    let kamperJS = {{kamper|safe}};
    document.getElementById("kampContainerID").onload = startAnimasjoner();
    document.getElementById("kampContainerID").style.visibility = "visible";
    function startAnimasjoner(){
        console.log("DEMO");
        console.log("DEMO");
        let kamperEls = document.getElementsByClassName("kamp");
        for(let i=0; i<kamperEls.length; i++){
            setTimeout(function(){
                kamperEls[i].style.animationName = "vis";
                kamperEls[i].style.display = "inline-block";
            }, i*500);
        }
    }

    function setAnimasjon(){

    }

    function slettKamp(kampid){
            if(confirm("Vil du slette denne kampen?")){
                console.log("BESTEMT SEG FOR Ã… SLETTE");
                let xml = new XMLHttpRequest();
                xml.open("POST", "/kampeditor/delete", true);
                xml.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                xml.onreadystatechange = function(){
                    if(xml.readyState == 4 && xml.status == 200){
                        console.log("SUCCESS?")
                        console.log(xml.responseText);
                    }
                }
                let tmpObj = {"id":kampid};
                let stringified = JSON.stringify(tmpObj);
                console.log(stringified);
                xml.send(stringified);
                //lagKamp(tmpObj);
                window.location.reload(false);
            }
        }
    
    function rediger(kampid){
        console.log(kampid);
    }
    function byttSide(kampid){
        // let tmpObj = {};//Temp Javascript Object
        //     tmpObj["tid"] = document.getElementById("klID").value;
        //     tmpObj["dato"] = document.getElementById("datoID").value;
        //     tmpObj["kampID"] = "";
        //     tmpObj["lag1ID"] = document.getElementById("lag1").value;
        //     tmpObj["lag2ID"] = document.getElementById("lag2").value;

        //     tmpObj["divisjon"] = document.getElementById("divisjon").value;
        //     tmpObj["liga"] = document.getElementById("liga").value;
        //     tmpObj["spill"] = document.getElementById("spill").value;
        let xml = new XMLHttpRequest();
        xml.open("POST", "/kampeditor/swapside", true);
        xml.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        xml.onreadystatechange = function(){
            if(xml.readyState == 4 && xml.status == 200){
                console.log("SUCCESS?")
                console.log(xml.responseText);
            }
        }
        let tmpObj = {"id":kampid};
        let stringified = JSON.stringify(tmpObj);
        console.log(stringified);
        xml.send(stringified);
        //lagKamp(tmpObj);
        window.location.reload(false);
    }
</script>